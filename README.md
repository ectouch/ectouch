# ECTouch v2

ECTouch是一款开源的电商系统，为中小企业提供最佳的新零售解决方案。

采用稳定的MVC框架开发，执行效率、扩展性、稳定性值得信赖。MVC是一种将应用程序的逻辑层和表现层进行分离的方法。MVC分层有助于管理复杂的应用程序，因为您可以在一个时间内专门关注一个方面。例如，您可以在不依赖业务逻辑的情况下专注于视图设计。同时也让应用程序的测试更加容易。MVC分层同时也简化了分组开发。不同的开发人员可同时开发视图、控制器逻辑和业务逻辑。

## 平台需求

- IIS/Apache/Nginx
- **PHP 8.4+** (必需)
- MySQL 5.5+ (推荐 MySQL 5.7+ 或 MariaDB 10.2+)

建议使用平台：Linux + Nginx/Apache + PHP 8.4 + MySQL 5.7+

### PHP必须环境或启用的系统函数：

- **mysqli扩展** (必需，用于数据库连接)
- curl扩展
- GD扩展库 (图片处理)
- mbstring扩展 (多字节字符串处理)
- json扩展
- openssl扩展 (用于加密和HTTPS)
- 系统函数 —— phpinfo、dir

### PHP配置要求：

- memory_limit >= 128M
- upload_max_filesize >= 10M
- post_max_size >= 10M
- max_execution_time >= 60

### 基本目录结构
* /
* /admin       默认后台管理目录（可任意改名）
* /api         API 通知
* /data        静态资源和系统缓存、配置项目录[必须可写入]
* /images      商品图片目录
* /include     核心程序目录
* /install     程序安装器
* /plugins     插件程序目录
* /themes      系统默认模板目录
* /vendor      第三方包

### PHP环境容易碰到的不兼容性问题

* **PHP 版本不符**：系统要求 PHP 8.4+，低于此版本将无法运行
* **mysqli 扩展未安装**：PHP 8.4 不再支持旧的 mysql 扩展，必须使用 mysqli 扩展
* **data 目录没写入权限**：导致管理后台无法上传文件和生成缓存
* **PHP 上传临时文件夹**：没设置好或没写入权限，会导致文件上传功能无法使用
* **内存限制过低**：如果 memory_limit 设置过低，可能导致大文件处理失败
* **错误显示设置**：如果出现空白页面，请检查 PHP 错误日志或启用 display_errors 查看具体错误信息
  
## 程序安装使用

### 全新安装
* 确保服务器已安装 PHP 8.4 或更高版本
* 确保 mysqli 扩展已启用
* 浏览器中访问 http://www.domain.com/install/index.php (domain.com表示你的域名)
* 首次访问会进入安装界面，按照安装提示说明进行程序安装

### 从旧版本升级到 PHP 8.4

**重要提示：** 本版本要求 PHP 8.4+，不再兼容 PHP 5.x 和 PHP 7.x 版本。

#### 升级前准备

1. **备份数据**
   - 完整备份数据库（使用 mysqldump 或后台备份功能）
   - 备份所有网站文件
   - 记录当前系统版本和配置信息

2. **检查服务器环境**
   - 确认服务器支持 PHP 8.4
   - 确认 mysqli 扩展已安装并启用
   - 确认所有必需的 PHP 扩展已安装

3. **检查第三方插件**
   - 确认所有使用的插件支持 PHP 8.4
   - 联系插件开发者获取兼容版本

#### 升级步骤

1. **更新 PHP 版本**
   ```bash
   # 在服务器上升级 PHP 到 8.4
   # 具体命令取决于您的操作系统
   ```

2. **更新系统文件**
   - 下载最新版本的 ECTouch
   - 替换所有系统文件（保留 data 目录和自定义文件）
   - 保持 data/config.php 配置文件不变

3. **更新依赖包**
   ```bash
   composer install --no-dev
   ```

4. **清除缓存**
   - 删除 data/caches 目录下的所有缓存文件
   - 重新生成缓存

5. **测试验证**
   - 访问前台，检查页面显示是否正常
   - 登录后台，测试各项功能
   - 检查错误日志，确保无 PHP 错误或警告

#### 升级注意事项

- **不兼容的语法已移除**：旧版本中的一些 PHP 5.x 兼容代码已被移除
- **类型声明**：核心类和方法现在使用严格的类型声明
- **异常处理**：错误处理现在使用异常而非直接输出
- **性能提升**：PHP 8.4 提供了显著的性能改进

#### 回滚方案

如果升级后遇到问题：
1. 恢复备份的数据库
2. 恢复备份的文件
3. 将 PHP 版本回退到之前的版本

#### 获取帮助

如果在升级过程中遇到问题，请访问：
- 技术支持论坛：http://bbs.ecmoban.com
- 提交问题到 GitHub Issues

## 特色功能

* 手机短信验证码功能
* 支持微信商城对接及微信支付
* 订单包裹跟踪
* 手机端第三方登录
* 整站模块自适应宽度
* 支持无线支付宝支付
* 所有数据与ecshop后台无缝对接

## 社区交流

* ECTouch官方主站       http://www.ectouch.cn
* 技术支持论坛          http://bbs.ecmoban.com
* 上海商创网络科技      http://www.ecmoban.com

## 常见问题整理

http://bbs.ecmoban.com/thread-28767-1-1.html

## 安全&缺陷

如果你发现了一个安全漏洞，请发送邮件到 wanganlin@ecmoban.com。所有的安全漏洞都将及时得到解决。

## License

ECTouch 遵循 [GPL license](https://opensource.org/licenses/GPL-3.0) 开源协议。
